!function(a){"function"==typeof define&&define.amd?define(["underscore","backbone"],a):a(_,Backbone)}(function(a,b){return b.SubRoute=b.Router.extend({constructor:function(a,c){this.prefix=a=a||"",this.separator="/"===a.slice(-1)?"":"/",this.createTrailingSlashRoutes=c&&c.createTrailingSlashRoutes,b.Router.prototype.constructor.call(this,c);var d;d=b.history.fragment?b.history.getFragment():b.history.getHash(),0===d.indexOf(a)&&b.history.loadUrl(d),this.postInitialize&&this.postInitialize(c)},navigate:function(a,c){"/"!=a.substr(0,1)&&0!=a.indexOf(this.prefix.substr(0,this.prefix.length-1))&&(a=this.prefix+(a?this.separator:"")+a),b.Router.prototype.navigate.call(this,a,c)},route:function(a,c,d){"/"===a.substr(0)&&(a=a.substr(1,a.length));var e=this.prefix;return a&&a.length>0&&(e+=this.separator+a),this.createTrailingSlashRoutes&&(this.routes[e+"/"]=c,b.Router.prototype.route.call(this,e+"/",c,d)),this.routes[e]=c,b.Router.prototype.route.call(this,e,c,d)}}),b.SubRoute});